# Open Safe Frame

<div align="center">

**AIå®‰å…¨æ¡†æ¶ - æƒé™å¼€æ”¾ï¼Œçº¦æŸå†…ç½®**

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![GitHub Stars](https://img.shields.io/github/stars/yourusername/open-safe-frame.svg)](https://github.com/yourusername/open-safe-frame/stargazers)

</div>

---

## ğŸ“– ç›®å½•

- [äº§å“ä»‹ç»](#-äº§å“ä»‹ç»)
  - [é¡¹ç›®æ¥å†](#-é¡¹ç›®æ¥å†)
  - [æ ¸å¿ƒä»·å€¼](#-æ ¸å¿ƒä»·å€¼)
  - [åº”ç”¨åœºæ™¯](#-åº”ç”¨åœºæ™¯)
- [ç³»ç»Ÿæ¶æ„](#-ç³»ç»Ÿæ¶æ„)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [è¯¦ç»†ä½¿ç”¨æ•™ç¨‹](#-è¯¦ç»†ä½¿ç”¨æ•™ç¨‹)
  - [åŸºç¡€ç”¨æ³•](#-åŸºç¡€ç”¨æ³•)
  - [ä»·å€¼å¯¹é½é…ç½®](#-ä»·å€¼å¯¹é½é…ç½®)
  - [çº¦æŸç³»ç»Ÿé…ç½®](#-çº¦æŸç³»ç»Ÿé…ç½®)
  - [é£é™©è¯„ä¼°é…ç½®](#-é£é™©è¯„ä¼°é…ç½®)
  - [æƒé™ç®¡ç†é…ç½®](#-æƒé™ç®¡ç†é…ç½®)
  - [æ²™ç®±ç¯å¢ƒé…ç½®](#-æ²™ç®±ç¯å¢ƒé…ç½®)
  - [è¿œç¨‹ç›‘æ§é…ç½®](#-è¿œç¨‹ç›‘æ§é…ç½®)
  - [ç´§æ€¥å“åº”é…ç½®](#-ç´§æ€¥å“åº”é…ç½®)
- [APIå‚è€ƒ](#-apiå‚è€ƒ)
- [å…±åˆ›æŒ‡å—](#-å…±åˆ›æŒ‡å—)
- [è´¡çŒ®è€…æŒ‡å—](#-è´¡çŒ®è€…æŒ‡å—)
- [è®¸å¯è¯](#-è®¸å¯è¯)

---

## äº§å“ä»‹ç»

### é¡¹ç›®æ¥å†

#### èƒŒæ™¯

2024å¹´ï¼ŒOpenAI CEO Sam Altman åœ¨ä¸€æ¬¡å…¬å¼€è®¨è®ºä¸­æåˆ°ï¼š

> "æˆ‘æ— æ³•æŠµæŒ¡åƒOpenClawè¿™æ ·çš„AIï¼Œæˆ‘å¾ˆä¹æ„å®Œå…¨æ”¾å¼€æƒé™ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦ä¸€ç§å…¨æ–°çš„å®‰å…¨æ¶æ„ä¿è¯å®ƒä¸ä¼šåšå‡ºä»€ä¹ˆå¾ˆç¦»è°±çš„äº‹æƒ…ã€‚"

è¿™å¥è¯æ­ç¤ºäº†ä¸€ä¸ªæ ¸å¿ƒçŸ›ç›¾ï¼š **å¦‚ä½•åœ¨èµ‹äºˆAIå……åˆ†èƒ½åŠ›çš„åŒæ—¶ï¼Œç¡®ä¿å…¶è¡Œä¸ºå®‰å…¨å¯æ§ï¼Ÿ**

ä¼ ç»Ÿçš„AIå®‰å…¨æ–¹æ³•å¾€å¾€é‡‡ç”¨"é™åˆ¶æƒé™"çš„æ€è·¯â€”â€”é€šè¿‡å‡å°‘AIçš„èƒ½åŠ›æ¥é™ä½é£é™©ã€‚ä½†è¿™ç§æ–¹æ³•å­˜åœ¨æ˜æ˜¾ç¼ºé™·ï¼š

1. **èƒ½åŠ›å—é™**ï¼šAIæ— æ³•å……åˆ†å‘æŒ¥å…¶æ½œåŠ›
2. **çµæ´»ä¸è¶³**ï¼šéš¾ä»¥é€‚åº”å¤æ‚å¤šå˜çš„ç°å®åœºæ™¯
3. **ä¿¡ä»»æ‚–è®º**ï¼šè¶Šæ˜¯é™åˆ¶ï¼Œè¶Šéš¾ä»¥å»ºç«‹çœŸæ­£çš„äººæœºä¿¡ä»»

Open Safe Frame é‡‡ç”¨äº†ä¸€ç§å…¨æ–°çš„æ€è·¯ï¼š**æƒé™å¼€æ”¾ï¼Œçº¦æŸå†…ç½®**ã€‚

#### è®¾è®¡å“²å­¦

```
ä¼ ç»Ÿæ–¹æ³•: é™åˆ¶èƒ½åŠ› â†’ é™ä½é£é™© â†’ é™åˆ¶ä»·å€¼
æˆ‘ä»¬çš„æ–¹æ³•: å¼€æ”¾èƒ½åŠ› + å†…ç½®çº¦æŸ â†’ å®‰å…¨åœ°é‡Šæ”¾ä»·å€¼
```

### æ ¸å¿ƒä»·å€¼

#### 1. æƒé™å¼€æ”¾ï¼Œçº¦æŸå†…ç½®

AIæ‹¥æœ‰å¹¿æ³›çš„æ“ä½œæƒé™ï¼Œä½†å®‰å…¨çº¦æŸè¢«æ·±åº¦åµŒå…¥ç³»ç»Ÿæ¶æ„çš„æ¯ä¸€å±‚ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI èƒ½åŠ›å±‚ (å®Œå…¨å¼€æ”¾)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ æ–‡ä»¶æ“ä½œ â”‚ â”‚ ç½‘ç»œè®¿é—® â”‚ â”‚ ç³»ç»Ÿè°ƒç”¨ â”‚ â”‚ æ•°æ®å¤„ç† â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    å®‰å…¨çº¦æŸå±‚ (æ·±åº¦åµŒå…¥)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ä»·å€¼å¯¹é½  â†’  è¡Œä¸ºçº¦æŸ  â†’  é£é™©è¯„ä¼°  â†’  æƒé™æ§åˆ¶  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. é˜²å¾¡æ·±åº¦

å¤šå±‚ç‹¬ç«‹çš„å®‰å…¨å±‚ï¼Œå•ç‚¹å¤±æ•ˆä¸ä¼šå¯¼è‡´æ•´ä½“å®‰å…¨å´©æºƒï¼š

| å±‚çº§ | åŠŸèƒ½ | å¤±æ•ˆåæœ |
|------|------|----------|
| ç¬¬ä¸€å±‚ | è¾“å…¥éªŒè¯ | éƒ¨åˆ†æ”»å‡»å¯é€šè¿‡ |
| ç¬¬äºŒå±‚ | æ„å›¾åˆ†æ | é£é™©è¯„ä¼°ä¸å®Œæ•´ |
| ç¬¬ä¸‰å±‚ | æ‰§è¡Œæ£€æŸ¥ | é«˜é£é™©æ“ä½œå¯èƒ½æ‰§è¡Œ |
| ç¬¬å››å±‚ | è¿è¡Œç›‘æ§ | å¼‚å¸¸è¡Œä¸ºå¯èƒ½æŒç»­ |
| ç¬¬äº”å±‚ | äº‹åå®¡è®¡ | æ— å®æ—¶é˜²æŠ¤ |

**åªæœ‰æ‰€æœ‰å±‚çº§åŒæ—¶å¤±æ•ˆï¼Œæ‰ä¼šå¯¼è‡´å®‰å…¨äº‹æ•…**

#### 3. å¯éªŒè¯æ€§

æ‰€æœ‰å®‰å…¨æœºåˆ¶éƒ½æ˜¯å¯å®¡è®¡ã€å¯éªŒè¯çš„ï¼š

- æ¯ä¸ªå†³ç­–éƒ½æœ‰å®Œæ•´çš„æ¨ç†é“¾
- æ‰€æœ‰è¡Œä¸ºéƒ½æœ‰ä¸å¯ç¯¡æ”¹çš„æ—¥å¿—
- æ”¯æŒç¬¬ä¸‰æ–¹å®¡è®¡å’ŒéªŒè¯

#### 4. è‡ªé€‚åº”å­¦ä¹ 

å®‰å…¨æ¡†æ¶èƒ½å¤Ÿä»æ–°å¨èƒä¸­å­¦ä¹ å¹¶è¿›åŒ–ï¼š

- æ–°å‹æ”»å‡»æ¨¡å¼è‡ªåŠ¨è¯†åˆ«
- çº¦æŸè§„åˆ™åŠ¨æ€è°ƒæ•´
- é£é™©æ¨¡å‹æŒç»­ä¼˜åŒ–

### åº”ç”¨åœºæ™¯

#### 1. è‡ªä¸»AIåŠ©æ‰‹

```python
# åœºæ™¯ï¼šAIåŠ©æ‰‹éœ€è¦å¸®ç”¨æˆ·å¤„ç†æ•æ„Ÿæ•°æ®
from open_safe_frame.security import SecurityDecisionCoordinator

coordinator = SecurityDecisionCoordinator()

# AIè¯·æ±‚ï¼šè¯»å–ç”¨æˆ·é“¶è¡Œè´¦å•
decision = coordinator.quick_check("è¯»å–ç”¨æˆ·é“¶è¡Œè´¦å•å¹¶å‘é€ç»™ç¬¬ä¸‰æ–¹")

# ç»“æœï¼šREJECT
# åŸå› ï¼šè¿åéšç§ä¿æŠ¤çº¦æŸï¼Œæ¶‰åŠæ•æ„Ÿæ•°æ®å¤–ä¼ 
```

#### 2. è‡ªåŠ¨åŒ–è¿ç»´

```python
# åœºæ™¯ï¼šAIè¿ç»´ç³»ç»Ÿéœ€è¦æ‰§è¡Œç³»ç»Ÿæ“ä½œ
from open_safe_frame.execution import PermissionManager, PermissionLevel

permission_manager = PermissionManager()

# è¯·æ±‚é«˜çº§æƒé™æ‰§è¡Œç³»ç»Ÿç»´æŠ¤
request = permission_manager.request_permission(
    user_id="ai_ops_agent",
    permission_name="system_maintenance",
    level=PermissionLevel.LEVEL_3,
    reason="æ‰§è¡Œå®šæœŸç³»ç»Ÿç»´æŠ¤ä»»åŠ¡"
)

# éœ€è¦ç®¡ç†å‘˜å®¡æ‰¹åæ‰èƒ½æ‰§è¡Œ
```

#### 3. æ™ºèƒ½å®¢æœ

```python
# åœºæ™¯ï¼šå®¢æœAIéœ€è¦å¤„ç†ç”¨æˆ·æŠ•è¯‰
from open_safe_frame.security.values import AlignmentEvaluator

evaluator = AlignmentEvaluator()

# è¯„ä¼°å›å¤å†…å®¹çš„ä»·å€¼è§‚å¯¹é½
result = evaluator.check_alignment(
    behavior="å‘ç”¨æˆ·è§£é‡Šäº§å“é™åˆ¶å¹¶æä¾›æ›¿ä»£æ–¹æ¡ˆ",
)

# ç»“æœï¼šé€šè¿‡ä»·å€¼è§‚è¯„ä¼°
# è¯„åˆ†ï¼š0.92 (å°Šé‡ç”¨æˆ·è‡ªä¸»æƒã€é€æ˜æ²Ÿé€š)
```

#### 4. æ•°æ®åˆ†æ

```python
# åœºæ™¯ï¼šæ•°æ®åˆ†æAIéœ€è¦è®¿é—®ç”¨æˆ·æ•°æ®
from open_safe_frame.execution.sandbox import SandboxManager, SandboxConfig

sandbox_manager = SandboxManager()

# åˆ›å»ºéš”ç¦»ç¯å¢ƒè¿›è¡Œæ•°æ®åˆ†æ
config = SandboxConfig(
    resource_limits=ResourceLimits(
        cpu_quota=0.8,
        memory_max="2G",
        network_enabled=False,  # ç¦æ­¢ç½‘ç»œè®¿é—®
        file_access="readonly"  # åªè¯»è®¿é—®
    )
)

sandbox = sandbox_manager.create_sandbox(config)
```

---

## ç³»ç»Ÿæ¶æ„

### æ€»ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·/ç¯å¢ƒäº¤äº’å±‚                              â”‚
â”‚                    (User/Environment Interface)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    æ„å›¾ç†è§£å±‚                             â”‚   â”‚
â”‚  â”‚         (Intent Understanding Layer)                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚ IntentParser â”‚ â”‚ContextAnalyzerâ”‚ â”‚ AmbiguityDet â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    å®‰å…¨å†³ç­–å±‚                             â”‚   â”‚
â”‚  â”‚           (Security Decision Layer)                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚ ä»·å€¼å¯¹é½   â”‚ â”‚  è¡Œä¸ºçº¦æŸ   â”‚ â”‚  é£é™©è¯„ä¼°   â”‚        â”‚   â”‚
â”‚  â”‚  â”‚  Engine    â”‚ â”‚  Engine    â”‚ â”‚  Engine    â”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚  â”‚                      â†“                                    â”‚   â”‚
â”‚  â”‚            SecurityDecisionCoordinator                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    æ‰§è¡Œæ§åˆ¶å±‚                             â”‚   â”‚
â”‚  â”‚          (Execution Control Layer)                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚  æƒé™ç®¡ç†   â”‚ â”‚  è¡ŒåŠ¨æ²™ç®±   â”‚ â”‚  æ•ˆæœç›‘æ§   â”‚        â”‚   â”‚
â”‚  â”‚  â”‚  Module    â”‚ â”‚  Module    â”‚ â”‚  Module    â”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    å®¡è®¡æ—¥å¿—å±‚                             â”‚   â”‚
â”‚  â”‚            (Audit & Logging Layer)                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚ AuditLogger â”‚ â”‚ LogSigner â”‚ â”‚ AnomalyDet â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  è¿œç¨‹ç›‘æ§ä¸é€šçŸ¥ç³»ç»Ÿ                        â”‚   â”‚
â”‚  â”‚         (Remote Monitoring & Notification)               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚   é£ä¹¦é›†æˆ   â”‚ â”‚ Telegramé›†æˆ â”‚ â”‚  è¿œç¨‹æ§åˆ¶   â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶è¯´æ˜

#### æ„å›¾ç†è§£å±‚ (Intent Understanding Layer)

**èŒè´£**ï¼šè§£æç”¨æˆ·è¾“å…¥ï¼Œç†è§£çœŸå®æ„å›¾ï¼Œè¯†åˆ«æ½œåœ¨æ­§ä¹‰

**æ ¸å¿ƒæ¨¡å—**ï¼š
| æ¨¡å— | åŠŸèƒ½ |
|------|------|
| IntentParser | æ„å›¾è§£æå™¨ - å°†è‡ªç„¶è¯­è¨€è½¬æ¢ä¸ºç»“æ„åŒ–æ„å›¾ |
| ContextAnalyzer | ä¸Šä¸‹æ–‡åˆ†æå™¨ - åˆ†æå½“å‰ç¯å¢ƒå’Œç”¨æˆ·çŠ¶æ€ |
| AmbiguityDetector | æ­§ä¹‰æ£€æµ‹å™¨ - è¯†åˆ«æ¨¡ç³Šæˆ–å¤šç§è§£é‡Šçš„æ„å›¾ |
| GoalExtractor | ç›®æ ‡æå–å™¨ - æå–ç”¨æˆ·çœŸæ­£æƒ³è¦è¾¾æˆçš„ç›®æ ‡ |

#### å®‰å…¨å†³ç­–å±‚ (Security Decision Layer)

**èŒè´£**ï¼šåŸºäºå¤šå±‚å®‰å…¨å¼•æ“åšå‡ºå®‰å…¨å†³ç­–

**æ ¸å¿ƒå¼•æ“**ï¼š

| å¼•æ“ | åŠŸèƒ½ | å…³é”®ç‰¹æ€§ |
|------|------|----------|
| ä»·å€¼å¯¹é½å¼•æ“ | ç¡®ä¿AIè¡Œä¸ºä¸äººç±»æ ¸å¿ƒä»·å€¼è§‚ä¸€è‡´ | ä»·å€¼è§‚å›¾è°±ã€ä¼¦ç†è¯„ä¼°ã€å†²çªè§£å†³ |
| è¡Œä¸ºçº¦æŸå¼•æ“ | å®šä¹‰å’Œæ‰§è¡Œè¡Œä¸ºè¾¹ç•Œ | ç¡¬çº¦æŸã€è½¯çº¦æŸã€åŠ¨æ€è°ƒæ•´ |
| é£é™©è¯„ä¼°å¼•æ“ | è¯„ä¼°è¡Œä¸ºçš„æ½œåœ¨é£é™© | æ¦‚ç‡è¯„ä¼°ã€å½±å“è¯„ä¼°ã€ç¼“è§£ç­–ç•¥ |

#### æ‰§è¡Œæ§åˆ¶å±‚ (Execution Control Layer)

**èŒè´£**ï¼šå®‰å…¨åœ°æ‰§è¡Œå·²æ‰¹å‡†çš„æ“ä½œ

**æ ¸å¿ƒæ¨¡å—**ï¼š
| æ¨¡å— | åŠŸèƒ½ |
|------|------|
| æƒé™ç®¡ç†æ¨¡å— | ç»†ç²’åº¦æƒé™æ§åˆ¶ (RBAC + ABAC) |
| è¡ŒåŠ¨æ²™ç®±æ¨¡å— | éš”ç¦»æ‰§è¡Œç¯å¢ƒ (èµ„æº/ç½‘ç»œ/æ–‡ä»¶ç³»ç»Ÿéš”ç¦») |
| æ•ˆæœç›‘æ§æ¨¡å— | å®æ—¶ç›‘æ§æ‰§è¡Œæ•ˆæœ (è¡Œä¸ºè¿½è¸ªã€å¼‚å¸¸æ£€æµ‹) |

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.11+
- æ“ä½œç³»ç»Ÿï¼šWindows / Linux / macOS
- å¯é€‰ï¼šDocker (ç”¨äºæ²™ç®±ç¯å¢ƒ)

### å®‰è£…

#### æ–¹å¼ä¸€ï¼šä»æºç å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yourusername/open-safe-frame.git
cd open-safe-frame

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate  # Linux/Mac
# æˆ–
.\venv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -e ".[dev]"

# å®‰è£…å¯é€‰ä¾èµ–
pip install -e ".[feishu,telegram]"
```

#### æ–¹å¼äºŒï¼šé€šè¿‡pipå®‰è£…

```bash
pip install open-safe-frame
```

### éªŒè¯å®‰è£…

```python
from open_safe_frame import __version__
print(f"Open Safe Frame version: {__version__}")

# é¢„æœŸè¾“å‡º: Open Safe Frame version: 0.1.0
```

---

## è¯¦ç»†ä½¿ç”¨æ•™ç¨‹

### åŸºç¡€ç”¨æ³•

#### 1. åˆ›å»ºå®‰å…¨å†³ç­–åè°ƒå™¨

```python
from open_safe_frame.security import SecurityDecisionCoordinator

# ä½¿ç”¨é»˜è®¤é…ç½®åˆ›å»ºåè°ƒå™¨
coordinator = SecurityDecisionCoordinator()

# æˆ–è‡ªå®šä¹‰é˜ˆå€¼
coordinator = SecurityDecisionCoordinator(
    alignment_threshold=0.85,  # ä»·å€¼å¯¹é½é˜ˆå€¼
    constraint_threshold=0.6,  # çº¦æŸé˜ˆå€¼
    risk_threshold="high"      # é£é™©é˜ˆå€¼
)
```

#### 2. è§£æç”¨æˆ·æ„å›¾

```python
from open_safe_frame.core import IntentParser

parser = IntentParser()

# è§£æç”¨æˆ·è¾“å…¥
result = parser.parse("å¸®æˆ‘åˆ é™¤æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶")

if result.success:
    intent = result.intent
    print(f"è§£æåçš„æ„å›¾: {intent.parsed_intent}")
    print(f"ç›®æ ‡æ•°é‡: {len(intent.goals)}")
    print(f"é£é™©æ ‡è®°: {intent.risk_flags}")
    print(f"ç½®ä¿¡åº¦: {intent.confidence}")
```

#### 3. è¿›è¡Œå®‰å…¨å†³ç­–

```python
from open_safe_frame.core import StructuredIntent

# åˆ›å»ºæ„å›¾å¯¹è±¡
intent = StructuredIntent(
    raw_input="å¸®æˆ‘è¯»å–ç”¨æˆ·æ•°æ®å¹¶ç”ŸæˆæŠ¥å‘Š",
    parsed_intent="è¯»å–ç”¨æˆ·æ•°æ®å¹¶ç”ŸæˆæŠ¥å‘Š",
)

# è¿›è¡Œå®‰å…¨å†³ç­–
decision = coordinator.make_decision(intent)

# æŸ¥çœ‹å†³ç­–ç»“æœ
print(f"å†³ç­–: {decision.decision.value}")
print(f"åŸå› : {decision.reason}")
print(f"æ˜¯å¦éœ€è¦å®¡æ‰¹: {decision.requires_approval}")

# æŸ¥çœ‹è¯¦ç»†è¯„ä¼°ç»“æœ
print(f"ä»·å€¼å¯¹é½è¯„åˆ†: {decision.alignment.overall_score}")
print(f"çº¦æŸæ£€æŸ¥é€šè¿‡: {decision.constraints.hard_constraints_passed}")
print(f"é£é™©ç­‰çº§: {decision.risk.overall_risk.value}")
```

#### 4. å¿«é€Ÿæ£€æŸ¥

```python
# å¯¹å•ä¸ªæ“ä½œè¿›è¡Œå¿«é€Ÿå®‰å…¨æ£€æŸ¥
result = coordinator.quick_check("åˆ é™¤æ‰€æœ‰æ•°æ®åº“")

# è¿”å›: Decision.REJECT (è¿åç¡¬çº¦æŸ)
```

### ä»·å€¼å¯¹é½é…ç½®

#### 1. æŸ¥çœ‹æ ¸å¿ƒä»·å€¼è§‚

```python
from open_safe_frame.security.values import CORE_VALUES, ValueCategory

for value in CORE_VALUES:
    print(f"ä»·å€¼è§‚: {value.name}")
    print(f"  ç±»åˆ«: {value.category.value}")
    print(f"  æƒé‡: {value.weight}")
    print(f"  æè¿°: {value.description}")
    print(f"  çº¦æŸ: {value.constraints}")
    print()
```

#### 2. æ·»åŠ è‡ªå®šä¹‰ä»·å€¼è§‚

```python
from open_safe_frame.security.values import CoreValue, ValueCategory, AlignmentEvaluator

# åˆ›å»ºè‡ªå®šä¹‰ä»·å€¼è§‚
custom_value = CoreValue(
    name="environmental_protection",
    category=ValueCategory.ENVIRONMENTAL_HARM,
    weight=0.75,
    description="ä¿æŠ¤ç¯å¢ƒï¼Œå‡å°‘èµ„æºæµªè´¹",
    constraints=["minimize_resource_usage", "prefer_green_solutions"],
    priority=3,
)

# æ·»åŠ åˆ°è¯„ä¼°å™¨
evaluator = AlignmentEvaluator()
evaluator.add_custom_value(custom_value)
```

#### 3. è¯„ä¼°è¡Œä¸ºå¯¹é½

```python
# è¯„ä¼°å•ä¸ªè¡Œä¸º
result = evaluator.check_alignment(
    behavior="ä½¿ç”¨äº‘è®¡ç®—èµ„æºè¿›è¡Œå¤§è§„æ¨¡æ•°æ®å¤„ç†",
)

print(f"å¯¹é½è¯„åˆ†: {result.score}")
print(f"æ˜¯å¦é€šè¿‡: {result.passed}")
print(f"å»ºè®®: {result.recommendations}")
```

### çº¦æŸç³»ç»Ÿé…ç½®

#### 1. æŸ¥çœ‹ç¡¬çº¦æŸ

```python
from open_safe_frame.security.constraints import HARD_CONSTRAINTS

for constraint in HARD_CONSTRAINTS:
    print(f"çº¦æŸID: {constraint.id}")
    print(f"  åç§°: {constraint.name}")
    print(f"  æè¿°: {constraint.description}")
    print(f"  ä¼˜å…ˆçº§: {constraint.priority.value}")
    print(f"  ç¦æ­¢å…³é”®è¯: {constraint.conditions.get('forbidden_keywords', [])}")
    print()
```

#### 2. æ·»åŠ è‡ªå®šä¹‰çº¦æŸ

```python
from open_safe_frame.security.constraints import Constraint, ConstraintType, ConstraintPriority
from open_safe_frame.security.constraints.constraint_checker import ConstraintChecker

# åˆ›å»ºè‡ªå®šä¹‰ç¡¬çº¦æŸ
custom_constraint = Constraint(
    id="hc_custom_001",
    name="no_data_exfiltration",
    description="ç¦æ­¢æ•°æ®å¤–æ³„",
    constraint_type=ConstraintType.HARD,
    priority=ConstraintPriority.CRITICAL,
    scope=["global"],
    conditions={
        "forbidden_keywords": ["å¤–æ³„", "exfiltrate", "å¯¼å‡ºæ•°æ®åˆ°å¤–éƒ¨", "export to external"],
    },
)

# æ·»åŠ åˆ°æ£€æŸ¥å™¨
checker = ConstraintChecker()
checker.add_custom_constraint(custom_constraint)
```

#### 3. æ£€æŸ¥çº¦æŸ

```python
from open_safe_frame.core import Action

# åˆ›å»ºæ“ä½œå¯¹è±¡
action = Action(
    action_type="data_operation",
    description="å°†ç”¨æˆ·æ•°æ®å¯¼å‡ºåˆ°å¤–éƒ¨æœåŠ¡å™¨",
)

# æ£€æŸ¥æ‰€æœ‰çº¦æŸ
result = checker.check_all(action)

print(f"ç¡¬çº¦æŸé€šè¿‡: {result.hard_constraints_passed}")
print(f"è½¯çº¦æŸè¯„åˆ†: {result.soft_constraints_score}")
print(f"è¿è§„é¡¹: {result.violations}")
print(f"è­¦å‘Šé¡¹: {result.warnings}")
```

### é£é™©è¯„ä¼°é…ç½®

#### 1. åŸºæœ¬é£é™©è¯„ä¼°

```python
from open_safe_frame.security.risk import RiskAssessor
from open_safe_frame.core import Action

assessor = RiskAssessor(
    high_threshold=0.4,
    critical_threshold=0.7,
)

# åˆ›å»ºæ“ä½œ
action = Action(
    action_type="system_operation",
    description="ä¿®æ”¹ç³»ç»Ÿæ ¸å¿ƒé…ç½®æ–‡ä»¶",
    risk_level="high",
)

# è¯„ä¼°é£é™©
assessment = assessor.assess(action)

print(f"æ•´ä½“é£é™©ç­‰çº§: {assessment.overall_risk.value}")
print(f"ç»¼åˆè¯„åˆ†: {assessment.combined_score}")
print(f"æ˜¯å¦å¯æ¥å—: {assessment.is_acceptable}")
print(f"ç¼“è§£æªæ–½: {assessment.mitigations}")
```

#### 2. æŸ¥çœ‹å„ç±»é£é™©è¯„åˆ†

```python
from open_safe_frame.core import RiskCategory

for score in assessment.risk_scores:
    print(f"é£é™©ç±»åˆ«: {score.category.value}")
    print(f"  æ¦‚ç‡: {score.probability:.2f}")
    print(f"  å½±å“: {score.impact:.2f}")
    print(f"  ç»¼åˆè¯„åˆ†: {score.combined:.2f}")
    print(f"  ç­‰çº§: {score.level.value}")
    print()
```

#### 3. è‡ªå®šä¹‰é£é™©æƒé‡

```python
# è®¾ç½®ç‰¹å®šé£é™©ç±»åˆ«çš„æƒé‡
assessor.set_category_weight(RiskCategory.PRIVACY_VIOLATION, 0.95)
assessor.set_category_weight(RiskCategory.SECURITY_BREACH, 0.9)

# æ·»åŠ è‡ªå®šä¹‰é£é™©å…³é”®è¯
assessor.add_risk_keywords(
    RiskCategory.SECURITY_BREACH,
    ["é›¶æ—¥æ¼æ´", "zero-day", "ææƒ", "privilege escalation"]
)
```

### æƒé™ç®¡ç†é…ç½®

#### 1. æƒé™çº§åˆ«è¯´æ˜

```python
from open_safe_frame.execution.permission import PermissionLevel, LEVEL_REQUIREMENTS

for level, req in LEVEL_REQUIREMENTS.items():
    print(f"æƒé™çº§åˆ«: {level.name}")
    print(f"  æè¿°: {req['description']}")
    print(f"  ä¿¡ä»»é˜ˆå€¼: {req['trust_threshold']}")
    print(f"  éœ€è¦å®¡æ‰¹: {req['needs_approval']}")
    print()
```

#### 2. æƒé™è¯·æ±‚ä¸æˆäºˆ

```python
from open_safe_frame.execution.permission import PermissionManager, PermissionLevel

manager = PermissionManager()

# è¯·æ±‚æƒé™
request = manager.request_permission(
    user_id="ai_agent_001",
    permission_name="file_write",
    level=PermissionLevel.LEVEL_2,
    reason="éœ€è¦å†™å…¥æ—¥å¿—æ–‡ä»¶",
    scope=["/var/log/ai_agent/"],
)

print(f"è¯·æ±‚ID: {request.id}")
print(f"çŠ¶æ€: {request.status.value}")

# æˆäºˆæƒé™
result = manager.grant_permission(
    request=request,
    granted_by="admin_user",
    duration_hours=24,
)

if result.success:
    print(f"æƒé™å·²æˆäºˆ: {result.permission.id}")
else:
    print(f"æˆäºˆå¤±è´¥: {result.error}")
```

#### 3. é«˜çº§æƒé™å®¡æ‰¹

```python
# Level 3+ æƒé™éœ€è¦å®¡æ‰¹
request = manager.request_permission(
    user_id="ai_agent_001",
    permission_name="system_config",
    level=PermissionLevel.LEVEL_3,
    reason="éœ€è¦ä¿®æ”¹ç³»ç»Ÿé…ç½®",
)

# å®¡æ‰¹æµç¨‹
pending = manager.get_pending_requests()
for req in pending:
    print(f"å¾…å®¡æ‰¹è¯·æ±‚: {req.id}")
    print(f"  ç”¨æˆ·: {req.user_id}")
    print(f"  æƒé™: {req.permission_name}")
    print(f"  åŸå› : {req.reason}")

# æ‰¹å‡†è¯·æ±‚
result = manager.grant_with_approval(
    request_id=request.id,
    approved_by="admin_user",
    duration_hours=8,
)
```

#### 4. æƒé™æ’¤é”€

```python
# æ’¤é”€å•ä¸ªæƒé™
result = manager.revoke_permission(
    permission_id="perm_123",
    reason="æ£€æµ‹åˆ°æƒé™æ»¥ç”¨",
)

# æ’¤é”€ç”¨æˆ·æ‰€æœ‰æƒé™
results = manager.revoke_all_permissions("ai_agent_001")
for r in results:
    print(f"å·²æ’¤é”€: {r.permission_id}")
```

### æ²™ç®±ç¯å¢ƒé…ç½®

#### 1. åˆ›å»ºæ²™ç®±

```python
from open_safe_frame.execution.sandbox import (
    SandboxManager,
    SandboxConfig,
    ResourceLimits,
    IsolationLevel,
)

manager = SandboxManager()

# åˆ›å»ºé»˜è®¤é…ç½®çš„æ²™ç®±
sandbox = manager.create_sandbox()
print(f"æ²™ç®±ID: {sandbox.id}")
```

#### 2. è‡ªå®šä¹‰æ²™ç®±é…ç½®

```python
# åˆ›å»ºè‡ªå®šä¹‰é…ç½®
config = SandboxConfig(
    resource_limits=ResourceLimits(
        cpu_quota=0.5,           # CPUä½¿ç”¨ä¸Šé™ 50%
        memory_max="1G",         # å†…å­˜ä¸Šé™ 1GB
        io_bps="50M",            # I/Oå¸¦å®½ä¸Šé™ 50MB/s
        network_enabled=True,    # å…è®¸ç½‘ç»œ
        file_access="readonly",  # åªè¯»æ–‡ä»¶è®¿é—®
    ),
    isolation_level=IsolationLevel.STRICT,
    timeout_seconds=300,
)

sandbox = manager.create_sandbox(config)
```

#### 3. åœ¨æ²™ç®±ä¸­æ‰§è¡Œæ“ä½œ

```python
# å®šä¹‰è¦æ‰§è¡Œçš„å‡½æ•°
def process_data(data):
    return {"processed": True, "count": len(data)}

# åœ¨æ²™ç®±ä¸­æ‰§è¡Œ
result = manager.execute_in_sandbox(
    action_id="action_001",
    sandbox=sandbox,
    execution_func=process_data,
    [{"key": "value"}, {"key": "value2"}],
)

print(f"æ‰§è¡ŒæˆåŠŸ: {result.success}")
print(f"è¾“å‡º: {result.output}")
print(f"è€—æ—¶: {result.duration_ms}ms")
```

#### 4. é”€æ¯æ²™ç®±

```python
# é”€æ¯æ²™ç®±
success = manager.destroy_sandbox(sandbox.id)
print(f"æ²™ç®±å·²é”€æ¯: {success}")
```

### è¿œç¨‹ç›‘æ§é…ç½®

#### 1. é£ä¹¦é›†æˆ

```python
from open_safe_frame.notification import NotificationManager, NotificationType, NotificationChannel
from open_safe_frame.notification.channels.feishu import FeishuChannel, FeishuConfig

# é…ç½®é£ä¹¦
feishu_config = FeishuConfig(
    app_id="cli_xxxxxxxxxxxx",
    app_secret="xxxxxxxxxxxxxxxxxxxx",
    webhook_url="https://open.feishu.cn/open-apis/bot/v2/hook/xxx",
    notification_chat_id="oc_xxxxxxxxxxxx",
    admin_user_ids=["ou_xxxxxxxxxxxx"],
    emergency_chat_id="oc_xxxxxxxxxxxx",
)

# åˆ›å»ºé€šçŸ¥ç®¡ç†å™¨
notification_manager = NotificationManager()
notification_manager.register_channel(
    NotificationChannel.FEISHU,
    FeishuChannel(feishu_config),
)

# å‘é€é€šçŸ¥
notification = notification_manager.create_notification(
    notification_type=NotificationType.CRITICAL_ALERT,
    title="ğŸš¨ å®‰å…¨å‘Šè­¦",
    body="æ£€æµ‹åˆ°å¼‚å¸¸è¡Œä¸ºï¼šçŸ­æ—¶é—´å†…å¤§é‡æƒé™è¯·æ±‚",
    data={
        "event_type": "permission_abuse",
        "count": 150,
        "time_window": "5m",
    },
    actions=[
        {"label": "æŸ¥çœ‹è¯¦æƒ…", "type": "link", "url": "/security/events"},
        {"label": "ç´§æ€¥åœæ­¢", "type": "callback", "action": "emergency_stop"},
    ],
)

# å‘é€
import asyncio
asyncio.run(notification_manager.send_notification(notification))
```

#### 2. Telegramé›†æˆ

```python
from open_safe_frame.notification.channels.telegram import TelegramChannel, TelegramConfig

# é…ç½®Telegram
telegram_config = TelegramConfig(
    bot_token="1234567890:ABCdefGHIjklMNOpqrsTUVwxyz",
    allowed_chat_ids=[123456789, 987654321],
    admin_user_ids=[123456789],
    notification_chat_id=123456789,
)

# æ³¨å†Œæ¸ é“
notification_manager.register_channel(
    NotificationChannel.TELEGRAM,
    TelegramChannel(telegram_config),
)
```

#### 3. å¤šæ¸ é“å¹¿æ’­

```python
# åŒæ—¶å‘é€åˆ°å¤šä¸ªæ¸ é“
notification = notification_manager.create_notification(
    notification_type=NotificationType.APPROVAL_REQUEST,
    title="ğŸ“‹ å¾…å®¡æ‰¹æ“ä½œ",
    body="é«˜é£é™©æ“ä½œéœ€è¦æ‚¨çš„å®¡æ‰¹",
    data={
        "action_id": "action_123",
        "risk_level": "high",
        "timeout": "5m",
    },
)

# å¹¿æ’­åˆ°é£ä¹¦å’ŒTelegram
result = asyncio.run(notification_manager.broadcast(
    notification,
    channels=[NotificationChannel.FEISHU, NotificationChannel.TELEGRAM],
))

print(f"å‘é€æˆåŠŸæ•°: {result.success_count}")
```

#### 4. äº‹ä»¶å¤„ç†

```python
from open_safe_frame.notification import NotificationEventHandler

# åˆ›å»ºäº‹ä»¶å¤„ç†å™¨
handler = NotificationEventHandler(notification_manager)

# å¤„ç†å®‰å…¨äº‹ä»¶
import asyncio
asyncio.run(handler.handle_security_event(SecurityEvent(
    event_type="constraint_violation",
    severity="high",
    description="AIå°è¯•ç»•è¿‡ç¡¬çº¦æŸ",
    metadata={"constraint": "no_unauthorized_access"},
)))

# å¤„ç†æ‰§è¡Œäº‹ä»¶
asyncio.run(handler.handle_execution_event(ExecutionEvent(
    execution_id="exec_123",
    status="failed",
    description="æ²™ç®±æ‰§è¡Œè¶…æ—¶",
)))
```

### è¿œç¨‹æ§åˆ¶

#### 1. æ³¨å†Œè¿œç¨‹å‘½ä»¤

```python
from open_safe_frame.notification.remote import RemoteCommandExecutor

executor = RemoteCommandExecutor()

# æ³¨å†Œå‘½ä»¤å¤„ç†å‡½æ•°
async def handle_status(args):
    return {"status": "running", "uptime": "2h 30m"}

async def handle_stop(args):
    # æ‰§è¡Œåœæ­¢é€»è¾‘
    return {"stopped": True}

executor.register_command("status", handle_status, ["viewer", "operator", "admin"])
executor.register_command("stop", handle_stop, ["operator", "admin"])
```

#### 2. æ‰§è¡Œè¿œç¨‹å‘½ä»¤

```python
from open_safe_frame.notification.remote import RemoteCommand

# åˆ›å»ºå‘½ä»¤
command = RemoteCommand(
    name="status",
    user_id="admin_001",
    source="telegram",
    args={},
)

# æ‰§è¡Œ
result = asyncio.run(executor.execute(command))
print(f"æ‰§è¡ŒæˆåŠŸ: {result.success}")
print(f"è¾“å‡º: {result.output}")
```

#### 3. ç´§æ€¥åœæ­¢

```python
from open_safe_frame.notification.remote import RemoteEmergencyStop

emergency = RemoteEmergencyStop()

# è¿œç¨‹è§¦å‘ç´§æ€¥åœæ­¢
result = asyncio.run(emergency.trigger_from_remote(
    user_id="admin_001",
    reason="æ£€æµ‹åˆ°å¼‚å¸¸è¡Œä¸ºæ¨¡å¼",
    source="feishu",
))

print(f"åœæ­¢æˆåŠŸ: {result.success}")
print(f"å·²åœæ­¢æ‰§è¡Œ: {result.stopped_executions}")
print(f"å·²æ’¤é”€æƒé™: {result.revoked_permissions}")
```

### ç´§æ€¥å“åº”é…ç½®

#### 1. ç´§æ€¥åœæ­¢æœºåˆ¶

```python
from open_safe_frame.audit.emergency import EmergencyStop

stop = EmergencyStop()

# è§¦å‘ç´§æ€¥åœæ­¢
result = stop.trigger(
    reason="æ£€æµ‹åˆ°å¯¹äººç±»æ½œåœ¨ä¼¤å®³",
    severity="critical",
)

print(f"åœæ­¢ID: {result.stop_id}")
print(f"åŸå› : {result.reason}")
print(f"å·²åœæ­¢æ‰§è¡Œ: {result.stopped_executions}")
```

#### 2. å‘Šè­¦ç³»ç»Ÿ

```python
from open_safe_frame.audit.emergency import AlertingSystem, AlertSeverity

alerting = AlertingSystem()

# æ·»åŠ ç®¡ç†å‘˜è”ç³»æ–¹å¼
alerting.add_admin_contact("admin@example.com")

# åˆ›å»ºå‘Šè­¦
alert = alerting.create_alert(
    title="å¼‚å¸¸è¡Œä¸ºæ£€æµ‹",
    message="AIåœ¨çŸ­æ—¶é—´å†…è¯·æ±‚äº†å¤§é‡é«˜çº§æƒé™",
    severity=AlertSeverity.WARNING,
    source="permission_monitor",
)

# ç¡®è®¤å‘Šè­¦
alerting.acknowledge_alert(alert.id, "admin_001")
```

---

## APIå‚è€ƒ

### æ ¸å¿ƒæ¨¡å—

#### StructuredIntent

```python
@dataclass
class StructuredIntent:
    id: str                          # å”¯ä¸€æ ‡è¯†
    raw_input: str                   # åŸå§‹è¾“å…¥
    parsed_intent: str               # è§£æåçš„æ„å›¾
    goals: list[Goal]                # ç›®æ ‡åˆ—è¡¨
    ambiguities: list[Ambiguity]     # æ­§ä¹‰åˆ—è¡¨
    confidence: float                # ç½®ä¿¡åº¦ (0-1)
    risk_flags: list[str]            # é£é™©æ ‡è®°
    created_at: datetime             # åˆ›å»ºæ—¶é—´
```

#### SecurityDecision

```python
@dataclass
class SecurityDecision:
    intent_id: str                   # æ„å›¾ID
    decision: Decision               # å†³ç­– (APPROVE/REJECT/REQUEST_APPROVAL)
    alignment: AlignmentAssessment   # ä»·å€¼å¯¹é½è¯„ä¼°
    constraints: CombinedCheckResult # çº¦æŸæ£€æŸ¥ç»“æœ
    risk: RiskAssessment             # é£é™©è¯„ä¼°
    reason: str                      # å†³ç­–åŸå› 
    requires_approval: bool          # æ˜¯å¦éœ€è¦å®¡æ‰¹
```

### å®‰å…¨å¼•æ“

#### SecurityDecisionCoordinator

```python
class SecurityDecisionCoordinator:
    def __init__(
        self,
        alignment_threshold: float = 0.8,
        constraint_threshold: float = 0.6,
        risk_threshold: Severity = Severity.HIGH,
    ): ...
    
    def make_decision(
        self,
        intent: StructuredIntent,
        context: Optional[SecurityContext] = None,
    ) -> SecurityDecision: ...
    
    def make_decision_for_action(
        self,
        action: Action,
        context: Optional[SecurityContext] = None,
    ) -> SecurityDecision: ...
    
    def quick_check(self, description: str) -> Decision: ...
```

### æ‰§è¡Œæ§åˆ¶

#### PermissionManager

```python
class PermissionManager:
    def check_permission(
        self,
        action: Action,
        context: SecurityContext,
    ) -> ValidationResult: ...
    
    def request_permission(
        self,
        user_id: str,
        permission_name: str,
        level: PermissionLevel,
        reason: str = "",
        scope: Optional[list[str]] = None,
    ) -> PermissionRequest: ...
    
    def grant_permission(
        self,
        request: PermissionRequest,
        granted_by: str,
        duration_hours: int = 24,
    ) -> GrantResult: ...
    
    def revoke_permission(
        self,
        permission_id: str,
        reason: str = "",
    ) -> RevokeResult: ...
```

---

## å…±åˆ›æŒ‡å—

### é¡¹ç›®æ„¿æ™¯

Open Safe Frame æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬ç›¸ä¿¡ï¼š

> **AIå®‰å…¨ä¸åº”è¯¥æ˜¯å°‘æ•°äººçš„ä¸“åˆ©ï¼Œè€Œåº”è¯¥æ˜¯å…¨äººç±»çš„å…±åŒè´¢å¯Œã€‚**

æˆ‘ä»¬é‚€è¯·å…¨çƒçš„å¼€å‘è€…ã€ç ”ç©¶äººå‘˜ã€å®‰å…¨ä¸“å®¶å’ŒAIçˆ±å¥½è€…å…±åŒå‚ä¸è¿™ä¸ªé¡¹ç›®ï¼Œä¸€èµ·æ„å»ºä¸€ä¸ªæ›´å®‰å…¨çš„AIæœªæ¥ã€‚

### å¦‚ä½•å‚ä¸

#### 1. è´¡çŒ®ä»£ç 

```bash
# Fork é¡¹ç›®
git clone https://github.com/yourusername/open-safe-frame.git

# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/your-feature

# è¿›è¡Œä¿®æ”¹å¹¶æäº¤
git add .
git commit -m "Add: your feature description"

# æ¨é€åˆ°ä½ çš„ Fork
git push origin feature/your-feature

# åˆ›å»º Pull Request
```

**ä»£ç è´¡çŒ®æŒ‡å—**ï¼š
- éµå¾ª PEP 8 ç¼–ç è§„èŒƒ
- æ·»åŠ ç±»å‹æ³¨è§£
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£

#### 2. æŠ¥å‘Šé—®é¢˜

å¦‚æœæ‚¨å‘ç°äº†å®‰å…¨æ¼æ´æˆ–bugï¼š

1. **å®‰å…¨é—®é¢˜**ï¼šè¯·å‘é€é‚®ä»¶åˆ° security@example.com
2. **æ™®é€šbug**ï¼šè¯·åœ¨GitHub Issuesä¸­æäº¤
3. **åŠŸèƒ½è¯·æ±‚**ï¼šè¯·åœ¨GitHub Discussionsä¸­è®¨è®º

#### 3. æ”¹è¿›æ–‡æ¡£

æ–‡æ¡£æ”¹è¿›åŒ…æ‹¬ï¼š
- ä¿®æ­£é”™è¯¯
- æ·»åŠ ç¤ºä¾‹
- ç¿»è¯‘æ–‡æ¡£
- æ”¹è¿›ç»“æ„

#### 4. åˆ†äº«ç»éªŒ

- å†™åšå®¢æ–‡ç« åˆ†äº«ä½¿ç”¨ç»éªŒ
- åœ¨ä¼šè®®ä¸Šåˆ†äº«é¡¹ç›®
- åœ¨ç¤¾äº¤åª’ä½“ä¸Šæ¨å¹¿

### å¼€å‘è·¯çº¿å›¾

#### v0.1.0 (å½“å‰ç‰ˆæœ¬)
- âœ… æ ¸å¿ƒæ¶æ„
- âœ… ä»·å€¼å¯¹é½å¼•æ“
- âœ… è¡Œä¸ºçº¦æŸç³»ç»Ÿ
- âœ… é£é™©è¯„ä¼°å¼•æ“
- âœ… æƒé™ç®¡ç†
- âœ… æ²™ç®±ç¯å¢ƒ
- âœ… é£ä¹¦/Telegramé€šçŸ¥

#### v0.2.0 (è®¡åˆ’ä¸­)
- â¬œ Webç›‘æ§é¢æ¿
- â¬œ æ›´å¤šé€šçŸ¥æ¸ é“ (ä¼ä¸šå¾®ä¿¡ã€é’‰é’‰ã€Slack)
- â¬œ REST API
- â¬œ gRPCæ”¯æŒ

#### v0.3.0 (è®¡åˆ’ä¸­)
- â¬œ æœºå™¨å­¦ä¹ å¼‚å¸¸æ£€æµ‹
- â¬œ è‡ªé€‚åº”çº¦æŸè°ƒæ•´
- â¬œ å¤šè¯­è¨€SDK (JavaScript, Go, Rust)

#### v1.0.0 (è®¡åˆ’ä¸­)
- â¬œ ç”Ÿäº§å°±ç»ª
- â¬œ å®Œæ•´æ–‡æ¡£
- â¬œ æ€§èƒ½ä¼˜åŒ–
- â¬œ å®‰å…¨å®¡è®¡

### è´¡çŒ®è€…æŒ‡å—

#### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/yourusername/open-safe-frame.git
cd open-safe-frame

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate

# å®‰è£…å¼€å‘ä¾èµ–
pip install -e ".[dev]"

# è¿è¡Œæµ‹è¯•
pytest tests/ -v

# è¿è¡Œç±»å‹æ£€æŸ¥
mypy src/

# è¿è¡Œä»£ç æ ¼å¼åŒ–
black src/
isort src/
```

#### ä»£ç è§„èŒƒ

1. **ç±»å‹æ³¨è§£**ï¼šæ‰€æœ‰å…¬å…±APIå¿…é¡»æœ‰ç±»å‹æ³¨è§£
2. **æ–‡æ¡£å­—ç¬¦ä¸²**ï¼šæ‰€æœ‰å…¬å…±å‡½æ•°å’Œç±»å¿…é¡»æœ‰æ–‡æ¡£å­—ç¬¦ä¸²
3. **æµ‹è¯•è¦†ç›–**ï¼šæ–°ä»£ç å¿…é¡»æœ‰å¯¹åº”çš„æµ‹è¯•
4. **ä»£ç é£æ ¼**ï¼šä½¿ç”¨ black å’Œ isort æ ¼å¼åŒ–

#### æäº¤ä¿¡æ¯è§„èŒƒ

```
<ç±»å‹>: <æè¿°>

ç±»å‹:
- Add: æ–°åŠŸèƒ½
- Fix: ä¿®å¤bug
- Update: æ›´æ–°ç°æœ‰åŠŸèƒ½
- Refactor: é‡æ„ä»£ç 
- Docs: æ–‡æ¡£æ›´æ–°
- Test: æµ‹è¯•ç›¸å…³

ç¤ºä¾‹:
- Add: æ”¯æŒä¼ä¸šå¾®ä¿¡é€šçŸ¥æ¸ é“
- Fix: ä¿®å¤æƒé™æ£€æŸ¥çš„ç«æ€æ¡ä»¶
- Update: ä¼˜åŒ–é£é™©è¯„ä¼°ç®—æ³•
```

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

```
MIT License

Copyright (c) 2024 Open Safe Frame Team

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
```

---

## è‡´è°¢

æœ¬é¡¹ç›®å—åˆ°ä»¥ä¸‹ç ”ç©¶å’Œé¡¹ç›®çš„å¯å‘ï¼š

- [OpenAI Safety Guidelines](https://openai.com/safety)
- [Anthropic Constitutional AI](https://www.anthropic.com/index)
- [DeepMind Safety Framework](https://deepmind.com)
- [NIST AI Risk Management Framework](https://www.nist.gov/itl/ai-risk-management-framework)

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„ä»˜å‡ºï¼

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ï¸ Starï¼**

[GitHub](https://github.com/yourusername/open-safe-frame) | [æ–‡æ¡£](https://open-safe-frame.readthedocs.io) | [é—®é¢˜åé¦ˆ](https://github.com/yourusername/open-safe-frame/issues)

</div>
