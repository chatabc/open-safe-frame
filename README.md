# Open Safe Frame

<div align="center">

**AIå®‰å…¨æ¡†æ¶ - æƒé™å¼€æ”¾ï¼Œçº¦æŸå†…ç½®**

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

Open Safe Frame æ˜¯ä¸€ä¸ªå…¨æ–°çš„AIå®‰å…¨æ¡†æ¶ï¼Œæ—¨åœ¨å…è®¸AIç³»ç»Ÿåœ¨"å®Œå…¨æ”¾å¼€æƒé™"çš„æƒ…å†µä¸‹è¿è¡Œï¼ŒåŒæ—¶é€šè¿‡å¤šå±‚å®‰å…¨æœºåˆ¶ç¡®ä¿å…¶è¡Œä¸ºä¸ä¼šåç¦»äººç±»ä»·å€¼è§‚å’Œé¢„æœŸç›®æ ‡ã€‚

### æ ¸å¿ƒç†å¿µ

- **æƒé™å¼€æ”¾ï¼Œçº¦æŸå†…ç½®**ï¼šAIæ‹¥æœ‰å¹¿æ³›çš„æ“ä½œæƒé™ï¼Œä½†å®‰å…¨çº¦æŸè¢«æ·±åº¦åµŒå…¥ç³»ç»Ÿæ¶æ„
- **é˜²å¾¡æ·±åº¦**ï¼šå¤šå±‚ç‹¬ç«‹çš„å®‰å…¨å±‚ï¼Œå•ç‚¹å¤±æ•ˆä¸ä¼šå¯¼è‡´æ•´ä½“å®‰å…¨å´©æºƒ
- **å¯éªŒè¯æ€§**ï¼šæ‰€æœ‰å®‰å…¨æœºåˆ¶éƒ½æ˜¯å¯å®¡è®¡ã€å¯éªŒè¯çš„
- **è‡ªé€‚åº”å­¦ä¹ **ï¼šå®‰å…¨æ¡†æ¶èƒ½å¤Ÿä»æ–°å¨èƒä¸­å­¦ä¹ å¹¶è¿›åŒ–

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·/ç¯å¢ƒäº¤äº’å±‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    æ„å›¾ç†è§£å±‚ (Intent Understanding)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    å®‰å…¨å†³ç­–å±‚ (Security Decision)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ ä»·å€¼å¯¹é½å¼•æ“ â”‚ â”‚ è¡Œä¸ºçº¦æŸå¼•æ“ â”‚ â”‚ é£é™©è¯„ä¼°å¼•æ“ â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    æ‰§è¡Œæ§åˆ¶å±‚ (Execution Control)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  æƒé™ç®¡ç†   â”‚ â”‚  è¡ŒåŠ¨æ²™ç®±   â”‚ â”‚  æ•ˆæœç›‘æ§   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    å®¡è®¡æ—¥å¿—å±‚ (Audit & Logging)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### 1. ä»·å€¼å¯¹é½å¼•æ“
- æ ¸å¿ƒä»·å€¼è§‚æ¡†æ¶å®šä¹‰
- è¡Œä¸ºä¼¦ç†è¯„ä¼°
- ä»·å€¼å†²çªè§£å†³æœºåˆ¶

### 2. è¡Œä¸ºçº¦æŸç³»ç»Ÿ
- ç¡¬çº¦æŸï¼šä¸å¯è¿åçš„ç»å¯¹è§„åˆ™
- è½¯çº¦æŸï¼šæƒé‡è¯„ä¼°çš„æŒ‡å¯¼åŸåˆ™
- åŠ¨æ€çº¦æŸè°ƒæ•´

### 3. é£é™©è¯„ä¼°å¼•æ“
- å¤šç»´åº¦é£é™©åˆ†ç±»
- é£é™©æ¦‚ç‡ä¸å½±å“è¯„ä¼°
- é£é™©ç¼“è§£ç­–ç•¥

### 4. æƒé™ç®¡ç†
- 5çº§æƒé™å±‚æ¬¡ç»“æ„
- åŠ¨æ€æƒé™æˆäºˆ/æ’¤é”€
- åŸºäºä¿¡ä»»è¯„åˆ†çš„æƒé™æ§åˆ¶

### 5. æ²™ç®±æ‰§è¡Œç¯å¢ƒ
- èµ„æºéš”ç¦»ï¼ˆCPUã€å†…å­˜ã€I/Oï¼‰
- ç½‘ç»œéš”ç¦»
- æ–‡ä»¶ç³»ç»Ÿéš”ç¦»

### 6. è¿œç¨‹ç›‘æ§ä¸é€šçŸ¥
- é£ä¹¦/Telegramå®æ—¶é€šçŸ¥
- è¿œç¨‹ç´§æ€¥åœæ­¢
- ç§»åŠ¨ç«¯ç›‘æ§é¢æ¿

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yourusername/open-safe-frame.git
cd open-safe-frame

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# or
.\venv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -e ".[dev]"
```

### åŸºæœ¬ä½¿ç”¨

```python
from open_safe_frame.core import StructuredIntent
from open_safe_frame.security import SecurityDecisionCoordinator

# åˆ›å»ºå®‰å…¨å†³ç­–åè°ƒå™¨
coordinator = SecurityDecisionCoordinator()

# åˆ›å»ºæ„å›¾
intent = StructuredIntent(
    raw_input="å¸®æˆ‘è¯»å–ç”¨æˆ·æ•°æ®",
    parsed_intent="è¯»å–ç”¨æˆ·æ•°æ®",
)

# è¿›è¡Œå®‰å…¨å†³ç­–
decision = coordinator.make_decision(intent)

print(f"å†³ç­–ç»“æœ: {decision.decision.value}")
print(f"åŸå› : {decision.reason}")
```

### è¿œç¨‹ç›‘æ§é…ç½®

```python
from open_safe_frame.notification import NotificationManager, NotificationType
from open_safe_frame.notification.channels.feishu import FeishuChannel, FeishuConfig

# é…ç½®é£ä¹¦é€šçŸ¥
feishu_config = FeishuConfig(
    app_id="your_app_id",
    app_secret="your_app_secret",
    webhook_url="your_webhook_url",
    notification_chat_id="your_chat_id",
)

# åˆ›å»ºé€šçŸ¥ç®¡ç†å™¨
manager = NotificationManager()
manager.register_channel(NotificationChannel.FEISHU, FeishuChannel(feishu_config))

# å‘é€å‘Šè­¦
notification = manager.create_notification(
    notification_type=NotificationType.CRITICAL_ALERT,
    title="å®‰å…¨å‘Šè­¦",
    body="æ£€æµ‹åˆ°å¼‚å¸¸è¡Œä¸º",
)

await manager.send_notification(notification)
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
open_safe_frame/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ models.py      # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ context.py     # ä¸Šä¸‹æ–‡ç®¡ç†
â”‚   â”‚   â””â”€â”€ results.py     # ç»“æœç±»å‹
â”‚   â”œâ”€â”€ security/          # å®‰å…¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ values/        # ä»·å€¼å¯¹é½
â”‚   â”‚   â”œâ”€â”€ constraints/   # è¡Œä¸ºçº¦æŸ
â”‚   â”‚   â”œâ”€â”€ risk/          # é£é™©è¯„ä¼°
â”‚   â”‚   â””â”€â”€ decision_coordinator.py
â”‚   â”œâ”€â”€ execution/         # æ‰§è¡Œæ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ permission/    # æƒé™ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ sandbox/       # æ²™ç®±ç¯å¢ƒ
â”‚   â”‚   â””â”€â”€ monitoring/    # æ•ˆæœç›‘æ§
â”‚   â”œâ”€â”€ audit/             # å®¡è®¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ emergency/     # ç´§æ€¥å“åº”
â”‚   â”‚   â””â”€â”€ anomaly/       # å¼‚å¸¸æ£€æµ‹
â”‚   â””â”€â”€ notification/      # è¿œç¨‹ç›‘æ§
â”‚       â”œâ”€â”€ channels/      # é€šçŸ¥æ¸ é“
â”‚       â””â”€â”€ remote/        # è¿œç¨‹æ§åˆ¶
â”œâ”€â”€ tests/                 # æµ‹è¯•
â”œâ”€â”€ configs/               # é…ç½®æ–‡ä»¶
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â””â”€â”€ examples/              # ç¤ºä¾‹ä»£ç 
```

---

## ğŸ”’ å®‰å…¨æœºåˆ¶

### äº”å±‚é˜²å¾¡

1. **è¾“å…¥éªŒè¯å±‚**ï¼šæ£€æµ‹æ³¨å…¥æ”»å‡»ã€å¯¹æŠ—æ€§è¾“å…¥
2. **æ„å›¾å®‰å…¨åˆ†æ**ï¼šä»·å€¼å¯¹é½ã€çº¦æŸæ£€æŸ¥ã€é£é™©è¯„ä¼°
3. **æ‰§è¡Œå‰å®‰å…¨æ£€æŸ¥**ï¼šæƒé™éªŒè¯ã€é£é™©é˜ˆå€¼æ£€æŸ¥
4. **è¿è¡Œæ—¶ç›‘æ§**ï¼šè¡Œä¸ºè¿½è¸ªã€å¼‚å¸¸æ£€æµ‹ã€ç´§æ€¥ä¸­æ–­
5. **äº‹åå®¡è®¡**ï¼šè¡Œä¸ºåˆ†æã€å½±å“è¯„ä¼°ã€åˆè§„æ£€æŸ¥

### ç¡¬çº¦æŸ

- ç¦æ­¢å¯¹äººç±»é€ æˆä¼¤å®³
- ç¦æ­¢æ¬ºéª—è¡Œä¸º
- ç¦æ­¢æœªæˆæƒè®¿é—®
- ç¦æ­¢ä¿®æ”¹è‡ªèº«å®‰å…¨æœºåˆ¶

---

## ğŸ“± è¿œç¨‹æ§åˆ¶å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ | æƒé™è¦æ±‚ |
|------|------|----------|
| `/status` | æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€ | viewer+ |
| `/stop` | ç´§æ€¥åœæ­¢ | admin/operator |
| `/resume` | æ¢å¤æ‰§è¡Œ | admin |
| `/approve` | æ‰¹å‡†å¾…å®¡æ“ä½œ | admin/approver |
| `/reject` | æ‹’ç»å¾…å®¡æ“ä½œ | admin/approver |
| `/permissions` | æŸ¥çœ‹æ´»è·ƒæƒé™ | viewer+ |
| `/revoke` | æ’¤é”€æƒé™ | admin |

---

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/ -v

# è¿è¡Œå®‰å…¨æµ‹è¯•
pytest tests/security/ -v

# è¿è¡Œè¦†ç›–ç‡æµ‹è¯•
pytest --cov=src tests/
```

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ™ è‡´è°¢

- OpenAI Safety Guidelines
- Anthropic Constitutional AI
- DeepMind Safety Framework
- NIST AI Risk Management Framework
